<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="CanDB.html">CanDB</a></li></li><li><li><a href="CanDBAdmin.html">CanDBAdmin</a></li></li><li><li><a href="CanisterActions.html">CanisterActions</a></li></li><li><li><a href="CanisterMap.html">CanisterMap</a></li></li><li><li><a href="Entity.html">Entity</a></li></li><li><li><a href="HashTree.html">HashTree</a></li></li><li><li><a href="InterfaceSpec.html">InterfaceSpec</a></li></li><li><li><a href="RangeTree.html">RangeTree</a></li></li><li><li><a href="RangeTreeV2.html">RangeTreeV2</a></li></li><li><li><a href="SingleCanisterCanDB.html">SingleCanisterCanDB</a></li></li><li><li><a href="Utils.html">Utils</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.InterCanisterActionResult">InterCanisterActionResult</a></li></li><li><li><a href="#type.CanisterCleanupStatusMap">CanisterCleanupStatusMap</a></li></li><li><li><a href="#transferCyclesStopAndDeleteCanisters">transferCyclesStopAndDeleteCanisters</a></li></li><li><li><a href="#transferAllCycles">transferAllCycles</a></li></li><li><li><a href="#stopAllCanisters">stopAllCanisters</a></li></li><li><li><a href="#deleteAllCanisters">deleteAllCanisters</a></li></li><li><li><a href="#type.UpgradePKRangeOptions">UpgradePKRangeOptions</a></li></li><li><li><a href="#type.UpgradePKRangeResult">UpgradePKRangeResult</a></li></li><li><li><a href="#upgradeCanistersInPKRange">upgradeCanistersInPKRange</a></li></li><li><li><a href="#upgradeCanistersByPK">upgradeCanistersByPK</a></li></li></ul></nav><div class="documentation"><h1>CanDBAdmin</h1><p>CanDBAdmin - asynchronous child canister control utility methods to be called by the IndexCanister</p>
<div class="declaration"><h4 class="type-declaration" id="type.InterCanisterActionResult"><span class="keyword">type </span><span class="type">InterCanisterActionResult</span> = {#ok; #err : <span class="type">Text</span>}</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.CanisterCleanupStatusMap"><span class="keyword">type </span><span class="type">CanisterCleanupStatusMap</span> = { transfer : <span class="type">RBT.Tree</span>&lt;<span class="type">Text</span>, <a href="#type.InterCanisterActionResult"><span class="type">InterCanisterActionResult</span></a>&gt;; stop : <span class="type">RBT.Tree</span>&lt;<span class="type">Text</span>, <a href="#type.InterCanisterActionResult"><span class="type">InterCanisterActionResult</span></a>&gt;; delete : <span class="type">RBT.Tree</span>&lt;<span class="type">Text</span>, <a href="#type.InterCanisterActionResult"><span class="type">InterCanisterActionResult</span></a>&gt; }</h4><p></p></div><div class="declaration"><h4 class="function" id="transferCyclesStopAndDeleteCanisters"><code><span class="keyword">public func </span><span class="fnname">transferCyclesStopAndDeleteCanisters</span>(<span class="parameter">canisterIds</span> : [<span class="type">Text</span>]) : <span class="keyword">async </span><a href="#type.CanisterCleanupStatusMap"><span class="type">CanisterCleanupStatusMap</span></a></code></h4><p><p>Cleans up a list of canisterIds in parallel. Returns the resulting status of each of the canisterIds after cleanup</p>
<ol><li>Calls the TransferCycles method of each actor </li><li>Stops each canistier</li><li>Deletes each canister</li></ol></p></div><div class="declaration"><h4 class="function" id="transferAllCycles"><code><span class="keyword">public func </span><span class="fnname">transferAllCycles</span>(<span class="parameter">canisterIds</span> : [<span class="type">Text</span>]) : <span class="keyword">async </span><a href="#type.InterCanisterStatusMap"><span class="type">InterCanisterStatusMap</span></a></code></h4><p><p>Attempts to transfer cycles from canisters (by canisterId) to the calling canister</p>
<p>canisterIds - each of the canisterIds that will transfer cycles to the calling canister</p>
</p></div><div class="declaration"><h4 class="function" id="stopAllCanisters"><code><span class="keyword">public func </span><span class="fnname">stopAllCanisters</span>(<span class="parameter">canisterPrincipals</span> : [<span class="type">Principal</span>]) : <span class="keyword">async </span><a href="#type.InterCanisterStatusMap"><span class="type">InterCanisterStatusMap</span></a></code></h4><p><p>Attempts to stop each of the canisters (by Principal) from the calling canister</p>
<p>canisterPrincipals - each of the canisterPrincipals of the canisters that will be stopped</p>
</p></div><div class="declaration"><h4 class="function" id="deleteAllCanisters"><code><span class="keyword">public func </span><span class="fnname">deleteAllCanisters</span>(<span class="parameter">canisterPrincipals</span> : [<span class="type">Principal</span>]) : <span class="keyword">async </span><a href="#type.InterCanisterStatusMap"><span class="type">InterCanisterStatusMap</span></a></code></h4><p><p>Attempts to delete each of the canisters (by Principal) from the calling canister</p>
<p>canisterPrincipals - each of the canisterPrincipals of the canisters that will be deleted</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.UpgradePKRangeOptions"><span class="keyword">type </span><span class="type">UpgradePKRangeOptions</span> = { canisterMap : <a href="CanisterMap.html#type.CanisterMap"><span class="type">CanisterMap.CanisterMap</span></a>; lowerPK : <span class="type">Text</span>; upperPK : <span class="type">Text</span>; limit : <span class="type">Nat</span>; wasmModule : <span class="type">Blob</span>; scalingOptions : <a href="CanDB.html#type.ScalingOptions"><span class="type">CanDB.ScalingOptions</span></a>; owners : ?[<span class="type">Principal</span>] }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.UpgradePKRangeResult"><span class="keyword">type </span><span class="type">UpgradePKRangeResult</span> = { upgradeCanisterResults : [(<span class="type">Text</span>, <a href="#type.InterCanisterActionResult"><span class="type">InterCanisterActionResult</span></a>)]; nextKey : ?<span class="type">Text</span> }</h4><p></p></div><div class="declaration"><h4 class="function" id="upgradeCanistersInPKRange"><code><span class="keyword">public func </span><span class="fnname">upgradeCanistersInPKRange</span>() : <span class="keyword">async </span><a href="#type.UpgradePKRangeResult"><span class="type">UpgradePKRangeResult</span></a></code></h4><p><p>Upgrades up to 5 PK (potentially multiple canisters per PK) at a time in a PK range</p>
</p></div><div class="declaration"><h4 class="function" id="upgradeCanistersByPK"><code><span class="keyword">public func </span><span class="fnname">upgradeCanistersByPK</span>(<br/>  <span class="parameter">canisterMap</span> : <a href="CanisterMap.html#type.CanisterMap"><span class="type">CanisterMap.CanisterMap</span></a>, <br/>  <span class="parameter">pk</span> : <span class="type">Text</span>, <br/>  <span class="parameter">wasmModule</span> : <span class="type">Blob</span>, <br/>  <span class="parameter">scalingOptions</span> : <a href="CanDB.html#type.ScalingOptions"><span class="type">CanDB.ScalingOptions</span></a><br/>) : <span class="keyword">async </span>[(<span class="type">Text</span>, <a href="#type.InterCanisterActionResult"><span class="type">InterCanisterActionResult</span></a>)]</code></h4><p><p>Upgrades all canisters for a specific PK</p>
</p></div></div></body></html>