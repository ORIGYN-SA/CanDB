<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="CanDB.html">CanDB</a></li></li><li><li><a href="CanDBAdmin.html">CanDBAdmin</a></li></li><li><li><a href="CanisterActions.html">CanisterActions</a></li></li><li><li><a href="CanisterMap.html">CanisterMap</a></li></li><li><li><a href="Entity.html">Entity</a></li></li><li><li><a href="HashTree.html">HashTree</a></li></li><li><li><a href="InterfaceSpec.html">InterfaceSpec</a></li></li><li><li><a href="RangeTree.html">RangeTree</a></li></li><li><li><a href="SingleCanisterCanDB.html">SingleCanisterCanDB</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.PK">PK</a></li></li><li><li><a href="#type.SK">SK</a></li></li><li><li><a href="#type.AttributeKey">AttributeKey</a></li></li><li><li><a href="#type.AttributeValuePrimitive">AttributeValuePrimitive</a></li></li><li><li><a href="#type.AttributeValueBlob">AttributeValueBlob</a></li></li><li><li><a href="#type.AttributeValueTuple">AttributeValueTuple</a></li></li><li><li><a href="#type.AttributeValueArray">AttributeValueArray</a></li></li><li><li><a href="#type.AttributeValueRBTreeValue">AttributeValueRBTreeValue</a></li></li><li><li><a href="#type.AttributeValueRBTree">AttributeValueRBTree</a></li></li><li><li><a href="#type.AttributeValue">AttributeValue</a></li></li><li><li><a href="#type.AttributeMap">AttributeMap</a></li></li><li><li><a href="#type.Entity">Entity</a></li></li><li><li><a href="#createAttributeMapFromKVPairs">createAttributeMapFromKVPairs</a></li></li><li><li><a href="#createAttributeValueRBTreeFromKVPairs">createAttributeValueRBTreeFromKVPairs</a></li></li><li><li><a href="#updateAttributeMapWithKVPairs">updateAttributeMapWithKVPairs</a></li></li><li><li><a href="#getAttributeMapValueForKey">getAttributeMapValueForKey</a></li></li><li><li><a href="#extractKVPairsFromAttributeMap">extractKVPairsFromAttributeMap</a></li></li><li><li><a href="#attributeMapsEqual">attributeMapsEqual</a></li></li><li><li><a href="#attributeMapToText">attributeMapToText</a></li></li><li><li><a href="#createEntity">createEntity</a></li></li><li><li><a href="#equal">equal</a></li></li><li><li><a href="#toText">toText</a></li></li><li><li><a href="#attributeValuesEqual">attributeValuesEqual</a></li></li></ul></nav><div class="documentation"><h1>Entity</h1><p>Entity - An entity is the base data record or item that is stored in CanDB</p>
<div class="declaration"><h4 class="type-declaration" id="type.PK"><span class="keyword">type </span><span class="type">PK</span> = <span class="type">Text</span></h4><p><p>Partition Key</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.SK"><span class="keyword">type </span><span class="type">SK</span> = <span class="type">Text</span></h4><p><p>Sort Key</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.AttributeKey"><span class="keyword">type </span><span class="type">AttributeKey</span> = <span class="type">Text</span></h4><p><p>Attribute Key</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.AttributeValuePrimitive"><span class="keyword">type </span><span class="type">AttributeValuePrimitive</span> = {#text : <span class="type">Text</span>; #int : <span class="type">Int</span>; #bool : <span class="type">Bool</span>; #float : <span class="type">Float</span>}</h4><p><p>AttributeValue primitive options</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.AttributeValueBlob"><span class="keyword">type </span><span class="type">AttributeValueBlob</span> = {#blob : <span class="type">Blob</span>}</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.AttributeValueTuple"><span class="keyword">type </span><span class="type">AttributeValueTuple</span> = {#tuple : [<a href="#type.AttributeValuePrimitive"><span class="type">AttributeValuePrimitive</span></a>]}</h4><p><p>An AttributeValue can be an array of AttributeValuePrimitive (tuple type)</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.AttributeValueArray"><span class="keyword">type </span><span class="type">AttributeValueArray</span> = {#arrayText : [<span class="type">Text</span>]; #arrayInt : [<span class="type">Int</span>]; #arrayBool : [<span class="type">Bool</span>]; #arrayFloat : [<span class="type">Float</span>]}</h4><p><p>An AttributeValue can be an array of any single one the primitive types (i.e. [Int])</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.AttributeValueRBTreeValue"><span class="keyword">type </span><span class="type">AttributeValueRBTreeValue</span> = <a href="#type.AttributeValuePrimitive"><span class="type">AttributeValuePrimitive</span></a> or <a href="#type.AttributeValueBlob"><span class="type">AttributeValueBlob</span></a> or <a href="#type.AttributeValueTuple"><span class="type">AttributeValueTuple</span></a> or <a href="#type.AttributeValueArray"><span class="type">AttributeValueArray</span></a></h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.AttributeValueRBTree"><span class="keyword">type </span><span class="type">AttributeValueRBTree</span> = {#tree : <span class="type">RBT.Tree</span>&lt;<span class="type">Text</span>, <a href="#type.AttributeValueRBTreeValue"><span class="type">AttributeValueRBTreeValue</span></a>&gt;}</h4><p><p>An AttributeValue can be a map (tree) with text keys and values as AttributeValuePrimitive or AttributeValueArray</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.AttributeValue"><span class="keyword">type </span><span class="type">AttributeValue</span> = <a href="#type.AttributeValuePrimitive"><span class="type">AttributeValuePrimitive</span></a> or <a href="#type.AttributeValueBlob"><span class="type">AttributeValueBlob</span></a> or <a href="#type.AttributeValueTuple"><span class="type">AttributeValueTuple</span></a> or <a href="#type.AttributeValueArray"><span class="type">AttributeValueArray</span></a> or <a href="#type.AttributeValueRBTree"><span class="type">AttributeValueRBTree</span></a></h4><p><p>Attribute Value (Variant). Represents the value of a specific Attribute in an AttributeMap.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.AttributeMap"><span class="keyword">type </span><span class="type">AttributeMap</span> = <span class="type">RBT.Tree</span>&lt;<a href="#type.AttributeKey"><span class="type">AttributeKey</span></a>, <a href="#type.AttributeValue"><span class="type">AttributeValue</span></a>&gt;</h4><p><p>Key to Value mapping of all Entity attributes, stored in a Red-Black Tree</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.Entity"><span class="keyword">type </span><span class="type">Entity</span> = { pk : <a href="#type.PK"><span class="type">PK</span></a>; sk : <a href="#type.SK"><span class="type">SK</span></a>; attributes : <a href="#type.AttributeMap"><span class="type">AttributeMap</span></a> }</h4><p><p>An Entity is the base data item or record that is stored in CanDB.</p>
<p>An entity consists of:</p>
<ul><li><p>Partition Key (PK) - A text/string partition key identifier used to partition your data.</p>
</li><li><p>Sort Key (SK) - A text/string key identifier used to sort your data. Some examples might be a timestamp, an incrementing identifier, or a numerical value (turned into a string).</p>
</li><li><p>Attributes - Additional key/value data pertaining to the entity. All attribute keys are of type text/string, and attribute values are expressed as variants, allowing for the dynamic insertion of different types of attribute values.</p>
</li></ul>

<p>The combination of an entity's partition key + sort key is unique in CanDB, meaning only one entity can have the exact same partition key and sort key.</p>
</p></div><div class="declaration"><h4 class="function" id="createAttributeMapFromKVPairs"><code><span class="keyword">public func </span><span class="fnname">createAttributeMapFromKVPairs</span>(<span class="parameter">attributePairs</span> : [(<a href="#type.AttributeKey"><span class="type">AttributeKey</span></a>, <a href="#type.AttributeValue"><span class="type">AttributeValue</span></a>)]) : <a href="#type.AttributeMap"><span class="type">AttributeMap</span></a></code></h4><p><p>Creates an AttributeMap Red-Black Tree from an Array of (AttributeKey, AttributeValue)</p>
</p></div><div class="declaration"><h4 class="function" id="createAttributeValueRBTreeFromKVPairs"><code><span class="keyword">public func </span><span class="fnname">createAttributeValueRBTreeFromKVPairs</span>(<span class="parameter">attributePairs</span> : [(<span class="type">Text</span>, <a href="#type.AttributeValueRBTreeValue"><span class="type">AttributeValueRBTreeValue</span></a>)]) : <span class="type">RBT.Tree</span>&lt;<span class="type">Text</span>, <a href="#type.AttributeValueRBTreeValue"><span class="type">AttributeValueRBTreeValue</span></a>&gt;</code></h4><p><p>Creates an AttributeValueRBTree from an array of key value pairs</p>
</p></div><div class="declaration"><h4 class="function" id="updateAttributeMapWithKVPairs"><code><span class="keyword">public func </span><span class="fnname">updateAttributeMapWithKVPairs</span>(<span class="parameter">attributeMap</span> : <a href="#type.AttributeMap"><span class="type">AttributeMap</span></a>, <span class="parameter">attributePairs</span> : [(<a href="#type.AttributeKey"><span class="type">AttributeKey</span></a>, <a href="#type.AttributeValue"><span class="type">AttributeValue</span></a>)]) : <a href="#type.AttributeMap"><span class="type">AttributeMap</span></a></code></h4><p><p>Updates an AttributeMap Red-Black Tree with an Array of (AttributeKey, AttributeValue)</p>
</p></div><div class="declaration"><h4 class="function" id="getAttributeMapValueForKey"><code><span class="keyword">public func </span><span class="fnname">getAttributeMapValueForKey</span>(<span class="parameter">attributeMap</span> : <a href="#type.AttributeMap"><span class="type">AttributeMap</span></a>, <span class="parameter">k</span> : <a href="#type.AttributeKey"><span class="type">AttributeKey</span></a>) : ?<a href="#type.AttributeValue"><span class="type">AttributeValue</span></a></code></h4><p><p>Gets a value from AttributeMap corresponding to a specific key</p>
</p></div><div class="declaration"><h4 class="function" id="extractKVPairsFromAttributeMap"><code><span class="keyword">public func </span><span class="fnname">extractKVPairsFromAttributeMap</span>(<span class="parameter">attributeMap</span> : <a href="#type.AttributeMap"><span class="type">AttributeMap</span></a>) : [(<a href="#type.AttributeKey"><span class="type">AttributeKey</span></a>, <a href="#type.AttributeValue"><span class="type">AttributeValue</span></a>)]</code></h4><p><p>Extracts all non-null kv pairs as an Array of (AttributeKey, AttributeValue) from the AttributeMap Red-Black Tree
This is function to aid developers in extracting the AttributeKey and AttributeValue from the AttributeMaps for an Entity that is returned from CanDB</p>
</p></div><div class="declaration"><h4 class="function" id="attributeMapsEqual"><code><span class="keyword">public func </span><span class="fnname">attributeMapsEqual</span>(<span class="parameter">m1</span> : <a href="#type.AttributeMap"><span class="type">AttributeMap</span></a>, <span class="parameter">m2</span> : <a href="#type.AttributeMap"><span class="type">AttributeMap</span></a>) : <span class="type">Bool</span></code></h4><p><p>Determines if two AttributeMaps are equal, ignoring deleted values in the AttributeMap Red-Black Tree</p>
</p></div><div class="declaration"><h4 class="function" id="attributeMapToText"><code><span class="keyword">public func </span><span class="fnname">attributeMapToText</span>(<span class="parameter">map</span> : <a href="#type.AttributeMap"><span class="type">AttributeMap</span></a>) : <span class="type">Text.Text</span></code></h4><p><p>Mostly for testing/debugging purposes, generates a textual representation of the AttributeMap and its underlying Red-Black Tree</p>
</p></div><div class="declaration"><h4 class="function" id="createEntity"><code><span class="keyword">public func </span><span class="fnname">createEntity</span>(<br/>  <span class="parameter">pk</span> : <a href="#type.PK"><span class="type">PK</span></a>, <br/>  <span class="parameter">sk</span> : <a href="#type.SK"><span class="type">SK</span></a>, <br/>  <span class="parameter">attributeMap</span> : <a href="#type.AttributeMap"><span class="type">AttributeMap</span></a><br/>) : <a href="#type.Entity"><span class="type">Entity</span></a></code></h4><p><p>Creates an Entity from a Partition Key, Sort Key, and Red-Black Tree mapping of Attributes</p>
</p></div><div class="declaration"><h4 class="function" id="equal"><code><span class="keyword">public func </span><span class="fnname">equal</span>(<span class="parameter">e1</span> : <a href="#type.Entity"><span class="type">Entity</span></a>, <span class="parameter">e2</span> : <a href="#type.Entity"><span class="type">Entity</span></a>) : <span class="type">Bool</span></code></h4><p><p>Determines if two Entities are equal</p>
</p></div><div class="declaration"><h4 class="function" id="toText"><code><span class="keyword">public func </span><span class="fnname">toText</span>(<span class="parameter">e</span> : <a href="#type.Entity"><span class="type">Entity</span></a>) : <span class="type">Text</span></code></h4><p><p>Mostly for testing/debugging purposes, generates a textual representation of an entity</p>
</p></div><div class="declaration"><h4 class="function" id="attributeValuesEqual"><code><span class="keyword">public func </span><span class="fnname">attributeValuesEqual</span>(<span class="parameter">av1</span> : <a href="#type.AttributeValue"><span class="type">AttributeValue</span></a>, <span class="parameter">av2</span> : <a href="#type.AttributeValue"><span class="type">AttributeValue</span></a>) : <span class="type">Bool</span></code></h4><p></p></div></div></body></html>